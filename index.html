<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>L.A Cashback VIP üëë</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      padding: 20px;
      margin: 0;
    }
    h2 {
      text-align: center;
      color: #222;
    }
    select, input, button {
      display: block;
      width: 100%;
      margin-bottom: 12px;
      padding: 10px;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      background-color: #007bff;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }

    .jogo-card {
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 20px;
      overflow: hidden;
      background: white;
    }

    .jogo-header {
      background-color: #0a2c5a;
      color: white;
      padding: 8px 12px;
      font-weight: bold;
      font-size: 0.95rem;
    }

    .jogo-conteudo {
      display: flex;
      flex-direction: column;
      padding: 12px;
    }

    .jogo-info {
      text-align: center;
      font-size: 0.95rem;
      color: #000;
      font-weight: bold;
      margin-bottom: 8px;
    }

    .jogo-times {
      text-align: center;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .jogo-odds label {
      background-color: #0a2c5a;
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-block;
      margin: 5px 5px 0 0;
    }

    .jogo-odds input {
      transform: scale(1.2);
      margin-right: 6px;
    }

    #resultado {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>L.A Cashback VIP üëë</h2>

  <label for="liga">Campeonato:</label>
  <select id="liga">
    <option value="soccer_brazil_campeonato">Brasileir√£o</option>
    <option value="soccer_epl">Premier League</option>
    <option value="soccer_spain_la_liga">La Liga</option>
    <option value="soccer_uefa_champs_league">Champions League</option>
  </select>

  <label for="oddMin">Odd m√≠nima:</label>
  <input type="number" id="oddMin" step="0.01" value="1.10">
  <label for="oddMax">Odd m√°xima:</label>
  <input type="number" id="oddMax" step="0.01" value="10.00">

  <button onclick="carregarOddsReais()">üîÑ Carregar Odds Reais</button>

  <div id="inputs"></div>

  <label for="tipoDesdobramento">Tipo de aposta (acertos):</label>
  <select id="tipoDesdobramento">
    <option value="1">1 (simples)</option>
    <option value="2">2 (duplas)</option>
    <option value="3">3 (trios)</option>
    <option value="4">4 (quartetos)</option>
    <option value="5">5 (quinas)</option>
    <option value="6">6 (senas)</option>
  </select>

  <input type="number" step="0.01" placeholder="Valor por combina√ß√£o (R$)" id="stake" value="10" />
  <button onclick="gerarDesdobramento()">Gerar L.A Cashback VIP üëë</button>

  <div id="resultado"></div>

<script>
  async function carregarOddsReais() {
    const API_KEY = "d4d52d8e8d186ecee91808ff600dcd63";
    const liga = document.getElementById("liga").value;
    const oddMin = parseFloat(document.getElementById("oddMin").value);
    const oddMax = parseFloat(document.getElementById("oddMax").value);
    const mercados = ["h2h", "totals"];
    const url = `https://api.the-odds-api.com/v4/sports/${liga}/odds/?regions=us&markets=${mercados.join(",")}&oddsFormat=decimal&apiKey=${API_KEY}`;

    try {
      const res = await fetch(url);
      const data = await res.json();
      const inputs = document.getElementById("inputs");
      inputs.innerHTML = "";

      data.forEach(jogo => {
        const bookmaker = jogo?.bookmakers?.[0];
        if (!bookmaker || !bookmaker.markets) return;

        let oddsHTML = "";
        bookmaker.markets.forEach(mercado => {
          let nomeMercado = mercado.key;
          if (nomeMercado === "h2h") nomeMercado = "1X2";
          if (nomeMercado === "totals") nomeMercado = "Total de Gols";

          oddsHTML += `<div style="margin-bottom: 10px;"><strong>${nomeMercado}:</strong><br>`;

          mercado.outcomes.forEach(outcome => {
            let nome = outcome.name;
            if (nome.toLowerCase() === "draw") nome = "Empate";
            if (nome.toLowerCase() === "over") nome = `Acima de ${mercado?.point ?? ''}`;
            if (nome.toLowerCase() === "under") nome = `Abaixo de ${mercado?.point ?? ''}`;

            if (outcome.price >= oddMin && outcome.price <= oddMax) {
              oddsHTML += `
                <label style="display:inline-block;background-color:#0a2c5a;color:white;padding:6px 12px;border-radius:6px;margin:5px;">
                  <input type="checkbox" class="jogoCheck" data-nome="${nome}" data-odd="${outcome.price.toFixed(2)}" style="transform:scale(1.2);margin-right:6px;" />
                  ${nome}: ${outcome.price.toFixed(2)}
                </label>`;
            }
          });

          oddsHTML += `</div>`;
        });

        if (oddsHTML) {
          const dataHora = new Date(jogo.commence_time);
          const dataStr = dataHora.toLocaleDateString("pt-BR", { day: '2-digit', month: 'short' });
          const horaStr = dataHora.toLocaleTimeString("pt-BR", { hour: '2-digit', minute: '2-digit' });
          const nomeLiga = liga.replace("soccer_", "").replaceAll("_", " ").toUpperCase();

          inputs.innerHTML += `
            <div class="jogo-card">
              <div class="jogo-header">${nomeLiga}</div>
              <div class="jogo-conteudo">
                <div class="jogo-info">üóìÔ∏è ${dataStr} √†s ${horaStr}</div>
                <div class="jogo-times">‚öΩ ${jogo.home_team} vs üü¢ ${jogo.away_team}</div>
                <div class="jogo-odds">${oddsHTML}</div>
              </div>
            </div>`;
        }
      });
    } catch (e) {
      alert("Erro ao carregar dados.");
      console.error(e);
    }
  }
</script>

</body>
</html>
